@startuml Command Processing Sequence Diagram
!theme plain
skinparam classAttributeIconSize 0
hide stereotype

actor User
participant ConsoleUi
participant CommandHandler
participant InteractivePromptHandler
participant CommandFactory
participant Command

User -> ConsoleUi: enters command (e.g., "add")
ConsoleUi -> CommandHandler: resolveCommand(input)
CommandHandler -> CommandHandler: parse command type

alt Interactive Mode Required
    CommandHandler -> InteractivePromptHandler: handleInteractiveCommand()
    InteractivePromptHandler -> User: prompt for project selection
    User -> InteractivePromptHandler: selects project
    InteractivePromptHandler -> User: prompt for description
    User -> InteractivePromptHandler: enters description
    InteractivePromptHandler -> User: prompt for priority
    User -> InteractivePromptHandler: selects priority
    InteractivePromptHandler -> User: prompt for deadline
    User -> InteractivePromptHandler: enters deadline
    InteractivePromptHandler -> CommandHandler: return constructed args
else Normal Mode
    CommandHandler -> CommandHandler: parse arguments normally
end

CommandHandler -> CommandFactory: createCommand(type, args)
CommandFactory -> Command: new Command(args)
CommandFactory -> CommandHandler: return Command
CommandHandler -> Command: execute()
Command -> ConsoleUi: return result
ConsoleUi -> User: display result

@enduml